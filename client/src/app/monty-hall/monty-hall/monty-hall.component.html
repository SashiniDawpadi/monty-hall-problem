<div class="container">
  <h1>Monty Hall Simulator</h1>
  <form [formGroup]="montyHallForm" (submit)="runSimulator()" class="card">
    <label>
      Number of simulations
      <input type="number" [formControl]="games" />
    </label>
    <label class="switch">
      <input type="checkbox" [formControl]="switchDoor" />
      <span>Switch door</span>
    </label>

    <button type="submit" [disabled]="loading || montyHallForm.invalid">
      {{ loading ? "Running..." : "Run simulation" }}
    </button>

    <div class="hint">
      Tip : Try 100,000 - 1,000,000 to see the paradox clearly
    </div>
  </form>

  <div *ngIf="result" class="results card">
    <h2>Results</h2>
    <div class="grid">
      <div>
        <strong>Games</strong>
        <div>{{ result.games }}</div>
      </div>
      <div>
        <strong>Switch</strong>
        <div>{{ result.switchDoor ? "Yes" : "No" }}</div>
      </div>
      <div>
        <strong>Wins</strong>
        <div>{{ result.wins }}</div>
      </div>
      <div>
        <strong>Losses</strong>
        <div>{{ result.losses }}</div>
      </div>
      <div>
        <strong>Win rate</strong>
        <div>{{ result.winRatePercent }}%</div>
      </div>
    </div>

    <div class="bars">
      <div
        class="bar wins"
        [style.width.%]="(result.wins / result.games) * 100"
      >
        Wins
      </div>
      <div
        class="bar losses"
        [style.width.%]="(result.losses / result.games) * 100"
      ></div>
    </div>
  </div>
</div>
